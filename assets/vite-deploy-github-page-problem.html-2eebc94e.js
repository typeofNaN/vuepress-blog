import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as t,a as p,d as n,f as s,e as o}from"./app-3059b6be.js";const c={},l=n("p",null,[s("最近将一个 "),n("code",null,"vite"),s(" 项目部署到 "),n("code",null,"Github Page"),s(" 上进行访问时，发现打包生成的"),n("code",null,"_plugin-vue_export-helper.js"),s(" 文件访问不到，网络请求显示404。")],-1),i=o(`<h2 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h2><p><code>Github Pages</code> 阻止了以下划线字符结尾的文件，所以会导致这个文件请求返回404。</p><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案" aria-hidden="true">#</a> 解决方案</h2><p>修改配置 <code>vite.config.ts</code>，重写打包的方案：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">const</span> <span class="token constant">INVALID_CHAR_REGEX</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\u0000-\\u001F&quot;#$&amp;*+,:;&lt;=&gt;?[\\]^\`{|}\\u007F]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
<span class="token keyword">const</span> <span class="token constant">DRIVE_LETTER_REGEX</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-z]:</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    reportCompressedSize<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    sourcemap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    commonjsOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      ignoreTryCatch<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    outDir<span class="token operator">:</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">,</span>
    assetsDir<span class="token operator">:</span> <span class="token string">&#39;assets&#39;</span><span class="token punctuation">,</span>
    chunkSizeWarningLimit<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token comment">// 解决包大小超过500kb的警告</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      output<span class="token operator">:</span> <span class="token punctuation">{</span>
        manualChunks<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        chunkFileNames<span class="token operator">:</span> <span class="token string">&#39;assets/[name]-[hash].js&#39;</span><span class="token punctuation">,</span>
        entryFileNames<span class="token operator">:</span> <span class="token string">&#39;assets/[name]-[hash].js&#39;</span><span class="token punctuation">,</span>
        assetFileNames<span class="token operator">:</span> <span class="token string">&#39;assets/[name]-[hash].[ext]&#39;</span><span class="token punctuation">,</span>
        <span class="token comment">// 解决文件名中的非法字符</span>
        <span class="token function-variable function">sanitizeFileName</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token constant">DRIVE_LETTER_REGEX</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
          <span class="token keyword">const</span> driveLetter <span class="token operator">=</span> match <span class="token operator">?</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            driveLetter <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>driveLetter<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">INVALID_CHAR_REGEX</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function r(u,d){return e(),t("div",null,[l,p(" more "),i])}const v=a(c,[["render",r],["__file","vite-deploy-github-page-problem.html.vue"]]);export{v as default};
